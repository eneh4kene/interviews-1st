# =============================================================================
# n8n Railway Deployment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# =============================================================================
# DATABASE CONFIGURATION (Neon Postgres)
# =============================================================================
# Your Neon Postgres database connection details
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=your-neon-host.neon.tech
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=your-database-name
DB_POSTGRESDB_USER=your-username
DB_POSTGRESDB_PASSWORD=your-password
DB_POSTGRESDB_SSL_ENABLED=true
DB_POSTGRESDB_SSL_REJECT_UNAUTHORIZED=false

# Alternative: Use DATABASE_URL if you prefer
# DATABASE_URL=postgresql://username:password@host:port/database?sslmode=require

# =============================================================================
# n8n CORE CONFIGURATION
# =============================================================================
# Basic n8n settings
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=https
WEBHOOK_URL=https://your-n8n-app.railway.app

# Security settings
N8N_SECURE_COOKIE=true
N8N_ENCRYPTION_KEY=your-super-secret-encryption-key-here-change-this
N8N_USER_MANAGEMENT_DISABLED=false

# User management (create your admin user)
N8N_USER=admin@yourcompany.com
N8N_PASSWORD=your-secure-admin-password

# =============================================================================
# n8n FEATURE FLAGS
# =============================================================================
# Disable features you don't need in production
N8N_DIAGNOSTICS_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_TEMPLATES_ENABLED=false
N8N_ONBOARDING_FLOW_DISABLED=true
N8N_PERSONALIZATION_ENABLED=false

# =============================================================================
# WORKFLOW CONFIGURATION
# =============================================================================
# Default workflow settings
N8N_WORKFLOWS_DEFAULT_NAME=My Workflow
N8N_DEFAULT_BINARY_DATA_MODE=filesystem

# Workflow execution settings
N8N_EXECUTION_MODE=queue
N8N_QUEUE_BULL_REDIS_HOST=localhost
N8N_QUEUE_BULL_REDIS_PORT=6379
N8N_QUEUE_BULL_REDIS_PASSWORD=

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console
N8N_LOG_FILE_LOCATION=/home/node/.n8n/logs

# =============================================================================
# TIMEZONE AND LOCALIZATION
# =============================================================================
GENERIC_TIMEZONE=UTC
N8N_DEFAULT_LOCALE=en

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# Your main application webhook URLs
INTERVIEW_ME_APP_URL=https://your-app.railway.app
INTERVIEW_ME_WEBHOOK_SECRET=your-webhook-secret-key

# AI Resume Generation webhook
AI_RESUME_WEBHOOK_URL=https://your-app.railway.app/api/n8n/ai-resume

# AI Apply webhook
AI_APPLY_WEBHOOK_URL=https://your-app.railway.app/api/n8n/ai-apply

# =============================================================================
# RAILWAY SPECIFIC
# =============================================================================
# Railway will automatically set these, but you can override if needed
PORT=5678
NODE_ENV=production

# =============================================================================
# OPTIONAL: REDIS CONFIGURATION (for queue mode)
# =============================================================================
# If you want to use Redis for workflow queuing (optional)
# N8N_QUEUE_BULL_REDIS_HOST=your-redis-host
# N8N_QUEUE_BULL_REDIS_PORT=6379
# N8N_QUEUE_BULL_REDIS_PASSWORD=your-redis-password
# N8N_QUEUE_BULL_REDIS_DB=0

# =============================================================================
# OPTIONAL: FILE STORAGE
# =============================================================================
# For file storage (if not using default filesystem)
# N8N_DEFAULT_BINARY_DATA_MODE=s3
# N8N_BINARY_DATA_S3_BUCKET=your-s3-bucket
# N8N_BINARY_DATA_S3_REGION=us-east-1
# N8N_BINARY_DATA_S3_ACCESS_KEY_ID=your-access-key
# N8N_BINARY_DATA_S3_SECRET_ACCESS_KEY=your-secret-key

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Change N8N_ENCRYPTION_KEY to a random 32+ character string
# 2. Use strong passwords for N8N_USER and N8N_PASSWORD
# 3. Keep your database credentials secure
# 4. Use HTTPS in production (Railway handles this automatically)
# 5. Consider using Railway's built-in secrets management for sensitive values
